<v-container>
    <v-row justify="justify-end" class="my-4">
        <v-btn color="red-lighten-1" prepend-icon="mdi-arrow-left" @click="$emit('trocarTela', 'UploadVue')">
            Voltar
        </v-btn>
    </v-row>

    <v-card border class="relative">
        <v-toolbar color="primary" title="Recortar Imagem"></v-toolbar>
        <v-card-text class="text-center">
            <div ref="cropContainer"
                style="width:100%; height:75vh; max-height:75vh; overflow:hidden; border:1px solid #ccc; display:flex; align-items:center; justify-content:center;">
                <img ref="img" :src="imagem" alt="crop" style="max-width:100%; max-height:100%; object-fit:contain;" />
            </div>

            <v-row class="mt-1" justify="center" align="center">
                <v-col cols="8" md="6">
                    <v-slider v-model="zoomLevel" append-icon="mdi-magnify-plus-outline"
                        prepend-icon="mdi-magnify-minus-outline" min="0.1" max="3" step="0.05"
                        @update:model-value="atualizarZoom"></v-slider>
                </v-col>
            </v-row>

        </v-card-text>

        <v-card-actions>
            <v-row justify="center" align="center">
                <v-btn prepend-icon="mdi-magnify-expand" color="primary" size="large" @click="visualizarCorte"
                    variant="tonal">Visualizar Corte</v-btn>
            </v-row>
        </v-card-actions>
    </v-card>

    <v-dialog v-model="dialog" width="1000" height="95vh">
        <v-card>
            <v-toolbar color="primary" dark>
                <v-toolbar-title>Pré-visualização do Corte</v-toolbar-title>
                <v-spacer></v-spacer>
                <v-btn icon @click="dialog = false"><v-icon>mdi-close</v-icon></v-btn>
            </v-toolbar>
            <v-card-text class="text-center">
                <v-img :src="preview" max-height="500" contain class="mx-auto my-4"></v-img>
            </v-card-text>
            <v-card-actions class="justify-center">
                <v-btn prepend-icon="mdi-mdi-scissors-cutting" color="success" size="large" @click="aplicarCorte">Aplicar Corte</v-btn>
                <v-btn variant="text" size="large" @click="dialog = false">Cancelar</v-btn>
            </v-card-actions>
        </v-card>
    </v-dialog>

</v-container>